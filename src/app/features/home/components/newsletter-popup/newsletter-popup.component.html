<div class="popup-overlay" (click)="closePopup()">
  <div class="popup-content" (click)="$event.stopPropagation()">
    <button class="close-button" (click)="closePopup()" aria-label="Cerrar">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
      </svg>
    </button>

    <div class="popup-header">
      <h3 class="popup-title">¡Suscríbete a ofertas y comunicaciones!</h3>
      <p class="popup-description">
        Ingresa tu email y recibe nuestras mejores ofertas y promociones exclusivas.
      </p>
    </div>

    <form class="newsletter-form" (ngSubmit)="subscribe()">
      <div class="input-group">
        <input 
          type="email" 
          [(ngModel)]="email"
          name="email"
          placeholder="Ingresa tu email"
          class="email-input"
          [disabled]="isSubscribing()">
        <button 
          type="submit" 
          class="btn btn-primary"
          [disabled]="isSubscribing() || !email().trim()">
          @if (isSubscribing()) {
            <span class="spinner"></span>
          } @else {
            Suscríbeme
          }
        </button>
      </div>
      
      @if (message()) {
        <p class="message" 
           [class.success]="message().includes('exitosa')"
           [class.error]="message().includes('Error')">
          {{ message() }}
        </p>
      }
    </form>

    <p class="privacy-note">
      Consulta nuestra <a href="/privacidad" class="privacy-link">Política de Privacidad</a> 
      para obtener detalles de la gestión de datos.
    </p>
  </div>
</div>
