@if (isLoading) {
  <div class="flex items-center justify-center min-h-screen bg-slate-50">
    <div class="text-center">
      <mat-spinner [diameter]="config.detail.loading.spinnerDiameter" [strokeWidth]="config.detail.loading.spinnerStrokeWidth" class="mx-auto"></mat-spinner>
      <p class="mt-6 text-gray-500 font-medium animate-pulse">{{ config.detail.loading.message }}</p>
    </div>
  </div>
} @else if (viaje) {
  <div class="w-full min-h-screen bg-[#F8FAFC] flex flex-col items-center">
    <div class="w-full max-w-7xl mx-auto mt-8 sm:mt-12 lg:mt-16 mb-12 sm:mb-16 px-4 sm:px-6">
      <mat-card class="!rounded-[2rem] overflow-hidden w-full shadow-[0_20px_60px_-15px_rgba(0,0,0,0.05)] border-0 bg-white">
        <div class="flex flex-col lg:flex-row w-full items-stretch">
          
          <!-- Imagen a la izquierda (Columna Visual) -->
          <div class="w-full lg:w-[45%] flex-shrink-0 p-4 sm:p-6 lg:p-8 flex items-center justify-center bg-gray-50/50">
            <div class="w-full h-full min-h-[300px] lg:min-h-[500px] rounded-3xl overflow-hidden shadow-lg relative group">
              <!-- Overlay sutil -->
              <div class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 z-10"></div>
              
              <img 
                [src]="viaje.imagenUrl || 'assets/images/placeholder-destination.jpg'" 
                [alt]="viaje.nombre" 
                class="w-full h-full object-cover transform transition-transform duration-700 group-hover:scale-105"
              />
            </div>
          </div>

          <!-- Contenido a la derecha (Columna Info) -->
          <div class="w-full lg:w-[55%] flex flex-col p-6 lg:p-10 pt-4 lg:pt-10">
            
            <!-- Header -->
            <div class="mb-8">
              <div class="flex items-center gap-3 mb-3">
                <span class="px-3 py-1 bg-amber-100 text-amber-700 rounded-full text-xs font-bold uppercase tracking-wider">
                  {{ config.detail.content.prefixTitle }}
                </span>
              </div>
              
              <mat-card-title class="text-3xl lg:text-5xl font-bold text-slate-900 !mb-2 !leading-tight tracking-tight">
                {{ viaje.nombre }}
              </mat-card-title>
            </div>

            <!-- DescripciÃ³n -->
            <mat-card-content class="!p-0 mb-8">
              <p class="text-base lg:text-lg text-slate-600 leading-loose font-normal">
                {{ viaje.descripcion }}
              </p>
            </mat-card-content>

            <!-- Cards de Info (Precio y Fecha) -->
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-10">
              <!-- Precio -->
              @if (viaje.valor) {
                <div class="flex items-center gap-4 p-4 rounded-2xl bg-emerald-50/50 border border-emerald-100/50">
                  <div class="w-12 h-12 rounded-full bg-emerald-100 flex items-center justify-center flex-shrink-0 text-emerald-600">
                    <mat-icon>attach_money</mat-icon>
                  </div>
                  <div>
                    <p class="text-xs font-bold text-emerald-600 uppercase tracking-wide mb-0.5">{{ config.detail.content.sections.price.label }}</p>
                    <p class="text-xl font-bold text-slate-900">
                      {{ formatearPrecio(viaje.valor) }}
                    </p>
                  </div>
                </div>
              }

              <!-- Fechas -->
              @if (viaje.fechaInicio && viaje.fechaFin) {
                <div class="flex items-center gap-4 p-4 rounded-2xl bg-blue-50/50 border border-blue-100/50">
                  <div class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0 text-blue-600">
                    <mat-icon>{{ config.detail.content.sections.dates.icon }}</mat-icon>
                  </div>
                  <div>
                    <p class="text-xs font-bold text-blue-600 uppercase tracking-wide mb-0.5">{{ config.detail.content.sections.dates.label }}</p>
                    <p class="text-base font-bold text-slate-900 leading-tight">
                      {{ formatearRangoFechas(viaje.fechaInicio, viaje.fechaFin) }}
                    </p>
                  </div>
                </div>
              }
            </div>
          </div>
        </div>
      </mat-card>
    </div>

    <!-- Secciones Adicionales -->
    <app-services-section class="w-full"></app-services-section>
    <app-cta-section 
      class="w-full"
      [viajeNombre]="viaje.nombre"
      [viajePrecio]="formatearPrecio(viaje.valor)"
      [viajeDescripcion]="viaje.descripcion"
      [viajeFechas]="formatearRangoFechas(viaje.fechaInicio, viaje.fechaFin)">
    </app-cta-section>

  </div>
} @else {
  <div class="flex items-center justify-center min-h-screen bg-slate-50">
    <div class="text-center bg-white p-8 rounded-3xl shadow-xl max-w-md w-full mx-4">
      <div class="w-20 h-20 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-6">
        <mat-icon class="text-red-500" style="font-size: 40px; width: 40px; height: 40px;">error_outline</mat-icon>
      </div>
      <h3 class="text-xl font-bold text-slate-900 mb-2">Lo sentimos</h3>
      <p class="text-slate-600 mb-8 leading-relaxed">{{ config.detail.error.message }}</p>
      <button mat-flat-button color="primary" (click)="volverAViajes()" class="!h-12 !px-8 !rounded-full !text-base">
        {{ config.detail.error.buttonText }}
      </button>
    </div>
  </div>
}
